@using Microsoft.AspNetCore.Identity
@using AlphaWebApp.Services
@inject SignInManager<User> SignInManager
@inject UserManager<User> UserManager
@inject ISubscriptionService subscriptionsService


@model IEnumerable<AlphaWebApp.Models.Article>

@{
    var firstArticle = Model.FirstOrDefault();
    var articles = Model.Skip(1);
}

@if (firstArticle != null)
{
    <div class="container-fluid">
        <div class="row">
            <div class="row col-6">
                <div class="name" style="background-color:red">
                    @firstArticle.Category.name
                </div>
                <div class="card" style="width: 100%; height: 100%">
                    <img src="@firstArticle.ImageLink" class="card-img-top" alt="Image" style="padding:1px; object-fit: cover; height: 250px;">
                    <div class="card-body d-flex flex-column align-items-start">
                        <h5 class="card-title" style="color: #234E70"><b>@firstArticle.HeadLine</b></h5>
                        <p style="color:#7A2048;">
                            @firstArticle.ContentSummary
                        </p>
                        @if (subscriptionsService.HasSubscription(User))
                        {
                            <a asp-controller="Articles" asp-action="ContinueReading" asp-route-id="@firstArticle.Id" class="btn btn-primary d-inline-block mt-auto">Read About Article</a>
                        }
                    </div>
                </div>
            </div>
            <div class="row col-6" style="margin-right:11px;">
                <!-- Foreach loop here -->
                @foreach (var article in articles)
                {
                    <div class="col-4">
                        <img src="@article.ImageLink" class="card-img-top" alt="Image" style="padding:1px; object-fit: cover; height: 150px; width:150%;">
                        @if (subscriptionsService.HasSubscription(User))
                        {
                            <a asp-controller="Articles" asp-action="ContinueReading" asp-route-id="@article.Id" class="headline" style="color:whitesmoke"><u>@article.HeadLine</u></a>
                        }
                    </div>
                }
            </div>
        </div>
    </div>
}
