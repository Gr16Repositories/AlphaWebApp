@using AlphaWebApp.Models.ViewModels;
@model List<SubscriptionsStatisticsVM>

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@{
    ViewData["Title"] = "Statistics";
}

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<canvas id="myChart" style="width:100%; max-height:600px"></canvas>

<script>
    // How to use NewtonSoft to get Model data to Javascritp variable
    var data = @Html.Raw(ViewBag.subData);

    const labels = [];
    const yValues = [];
        data.forEach(obj => {
            labels.push(new Date(obj.SubscriptionsDate).toLocaleDateString());
            yValues.push(obj.SubScriptionsInOneDay);
        });

        new Chart("myChart", {
            type: "line",
            data: {
                labels,
                datasets: [{
                    label: "Subscrptions",
                    fill: false,
                    lineTension: 0,
                    backgroundColor: "rgba(0,0,255,1.0)",
                    borderColor: "rgba(0,0,255,0.1)",
                    data: yValues
                }]
            },
            options: {
                legend: { display: false },
                scales: {
                    yAxes: [{ ticks: { min: 0} }],
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });

   
</script>


@*<canvas id="firstChart" style="max-width:400px; max-height:430px"></canvas>
   

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


<script>
   
    const ctx = document.getElementById('firstChart');

  

     new Chart(ctx, {
        type: 'line',
        data: {
            labels:
                [0.05, 0.1, 0.15, 0.2, 0.25, 0.3, 0.35, 0.4, 0.45, 0.5, 0.55, 0.6, 0.65, 0.7, 0.75, 0.8, 0.85, 0.9, 0.95, 1],
            datasets: [{
                label: 'Dataset 1',
                borderColor: window.chartColors.blue,
                borderWidth: 2,
                fill: false,
                data: [19304, 13433, 9341, 6931, 5169, 3885, 2927, 2159, 1853, 1502, 1176, 911, 724, 590, 491, 400, 335, 280, 239, 200]
            }]
        },
        options: {
            responsive: true,
            title: {
                display: true,
                text: 'Chart.js Drsw Line on Chart'
            },
            tooltips: {
                mode: 'index',
                intersect: true
            },
        }
    });
</script>


*@



